/* empty css              *//* empty css              */import{a as q,u as z,r as s,o as v,c as L,b as V,e as I,i as b,f as S,g as x,t as h,h as T,n as E,j as g,k,G as c,l as p,A as H,I as M,B as O,m as J,p as Q,q as R,_ as W}from"./index-986db628.js";const X=m=>(Q("data-v-c957168e"),m=m(),R(),m),Y={class:"fp"},Z={class:"fp-container"},ee=X(()=>V("div",{class:"fp-title"}," 忘记密码 ",-1)),oe={class:"fp-content"},ae={key:0,class:"fp-input-code"},te={class:"fp-error"},le=q({__name:"Fp",setup(m){const $=z(),f=s(""),a=s(""),y=s(""),A=s(""),d=s("1"),l=s(!1),P=s(""),u=s(0),_=s(0),w=s(!1),G=()=>{_.value&&(clearTimeout(_.value),_.value=0)},F=(o=-1)=>{o>0&&(u.value=o),G(),_.value=setTimeout(()=>{u.value--,_.value=0,u.value<=0?u.value=0:F()},1e3)},j=()=>{let o="";const e=f.value;for(let t=0;t<e.length;t++)e.charAt(t)>="0"&&e.charAt(t)<="9"&&(o+=e.charAt(t));f.value=o},K=async()=>{if(w.value||u.value>0)return;const o=y.value.toLowerCase(),e=c.getValidator().account(o);if(console.log(o,e),typeof e=="boolean"&&e)a.value="";else{a.value=p(e);return}w.value=!0;const t=await $.fpo(o);w.value=!1,t&&t.code===0?(d.value="2",F(c.getForgotPasswordCountDownTime())):a.value=H.message(t.message)},C=async()=>{if(l.value)return;const o=y.value.toLowerCase(),e=c.getValidator().account(o);if(typeof e=="boolean"&&e)a.value="";else{a.value=p(e);return}const t=f.value,r=c.getValidator().code(t);if(typeof r=="boolean"&&r)a.value="";else{a.value=p(r);return}const i=A.value,n=c.getValidator().password(i);if(typeof n=="boolean"&&n)a.value="";else{a.value=p(n);return}const N=P.value,B=c.getValidator().password(N);if(typeof B=="boolean"&&B)a.value="";else{a.value=p(B);return}const D=c.getValidator().passwordContrast(i,N);if(typeof D=="boolean"&&D)a.value="";else{a.value=p(D);return}l.value=!0;const U=await $.fp(o,t,i);l.value=!1,U&&U.code===0&&c.toHomePage()};return(o,e)=>{const t=M,r=O,i=J;return v(),L("div",Y,[V("div",Z,[ee,V("div",oe,[I(t,{maxlength:42,class:"fp-input-account",value:y.value,"onUpdate:value":e[0]||(e[0]=n=>y.value=n),onKeydown:b(K,["enter"]),disabled:l.value||d.value==="2",placeholder:o.$t("sign.in.ac.account.placeholder")},null,8,["value","onKeydown","disabled","placeholder"]),d.value==="2"?(v(),L("div",ae,[I(t,{maxlength:6,disabled:l.value,value:f.value,"onUpdate:value":e[1]||(e[1]=n=>f.value=n),class:"fp-input-code-input",onChange:j,onKeydown:b(C,["enter"]),placeholder:o.$t("sign.in.ac.code.placeholder")},null,8,["disabled","value","onKeydown","placeholder"]),I(r,{type:"primary",onClick:T(K,["stop"]),loading:w.value,disabled:l.value||u.value>0,class:E(l.value||u.value>0?"fp-input-code-button-disabled":"fp-input-code-button")},{default:S(()=>[x(h(w.value?"":u.value>0?`${o.$t("sign.in.ac.code.resetButton")}(${u.value}S)`:o.$t("sign.in.ac.code.button")),1)]),_:1},8,["onClick","loading","disabled","class"])])):g("",!0),d.value==="2"?(v(),k(i,{key:1,maxlength:42,disabled:l.value,placeholder:"密码",value:A.value,"onUpdate:value":e[2]||(e[2]=n=>A.value=n),class:"fp-input-account",onKeydown:b(C,["enter"])},null,8,["disabled","value","onKeydown"])):g("",!0),d.value==="2"?(v(),k(i,{key:2,maxlength:42,disabled:l.value,value:P.value,"onUpdate:value":e[3]||(e[3]=n=>P.value=n),class:"fp-input-account",placeholder:"确认密码",onKeydown:b(C,["enter"])},null,8,["disabled","value","onKeydown"])):g("",!0),V("div",te,h(a.value===""?"":"* "+a.value),1),d.value==="1"?(v(),k(r,{key:3,block:"",type:"primary",loading:l.value,class:"fp-input-button",onClick:T(K,["stop"])},{default:S(()=>[x(h(l.value?"":"下一步"),1)]),_:1},8,["loading","onClick"])):g("",!0),d.value==="2"?(v(),k(r,{key:4,block:"",type:"primary",loading:l.value,class:"fp-input-button",onClick:T(C,["stop"])},{default:S(()=>[x(h(l.value?"":"提交"),1)]),_:1},8,["loading","onClick"])):g("",!0)])])])}}});const ce=W(le,[["__scopeId","data-v-c957168e"]]);export{ce as default};
