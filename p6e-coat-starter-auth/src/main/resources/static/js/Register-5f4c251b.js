import{u as R}from"./auth-67f1874a.js";/* empty css              */import{a as $,r,o as K,U as L,x as N,b as G,c as M,e as _,f as v,k as q,g as D,h as x,t as y,i as I,n as z,G as c,m as p,A as S,I as E,B as O,p as j,q as F,s as H,_ as J}from"./index-367b30ac.js";const Q=m=>(F("data-v-41f33802"),m=m(),H(),m),W={class:"register"},X={class:"register-container"},Y=Q(()=>_("div",{class:"register-title"}," 注册账号 ",-1)),Z={class:"register-content"},ee={class:"register-input-code"},ae={class:"register-error"},oe=$({__name:"Register",setup(m){const A=R(),t=r({code:"",account:"",password:"",confirmPassword:""}),a=r(""),n=r(!1),T=r(""),u=r(0),g=r(0),f=r(!1),P=()=>{g.value&&(clearTimeout(g.value),g.value=0)},w=(o=-1)=>{o>0&&(u.value=o),P(),g.value=setTimeout(()=>{u.value--,g.value=0,u.value<=0?u.value=0:w()},1e3)};K(()=>{w(L.cache.getRegisterCodeCountDownTime())}),N(()=>{P()});const U=()=>{let o="";const e=t.value.code;for(let s=0;s<e.length;s++)e.charAt(s)>="0"&&e.charAt(s)<="9"&&(o+=e.charAt(s));t.value.code=o},B=async()=>{if(u.value>0||f.value)return;const o=t.value.account.toLowerCase(),e=c.getValidator().account(o);if(typeof e=="boolean"&&e)a.value="";else{a.value=p(e);return}T.value=o,f.value=!0;const s=await A.reo(o);f.value=!1,s&&s.code===0?w(c.getRegisterCountDownTime()):a.value=S.message(s.message)},V=async()=>{if(n.value)return;const o=t.value.account.toLowerCase(),e=c.getValidator().account(o);if(typeof e=="boolean"&&e)a.value="";else{a.value=p(e);return}const s=t.value.code,i=c.getValidator().code(s);if(typeof i=="boolean"&&i)a.value="";else{a.value=p(i);return}const d=t.value.password,l=c.getValidator().password(d);if(typeof l=="boolean"&&l)a.value="";else{a.value=p(l);return}const k=t.value.confirmPassword,C=c.getValidator().password(k);if(typeof C=="boolean"&&C)a.value="";else{a.value=p(C);return}const h=c.getValidator().passwordContrast(d,k);if(typeof h=="boolean"&&h)a.value="";else{a.value=p(h);return}n.value=!0;const b=await A.re(s,d);n.value=!1,b&&b.code!==0&&(a.value=S.message(b.message))};return(o,e)=>{const s=E,i=O,d=j;return G(),M("div",W,[_("div",X,[Y,_("div",Z,[v(s,{maxlength:42,disabled:n.value,value:t.value.account,"onUpdate:value":e[0]||(e[0]=l=>t.value.account=l),class:"register-input-account",placeholder:o.$t("sign.in.ac.account.placeholder")},null,8,["disabled","value","placeholder"]),_("div",ee,[v(s,{maxlength:6,disabled:n.value,onChange:U,onKeydown:q(V,["enter"]),value:t.value.code,"onUpdate:value":e[1]||(e[1]=l=>t.value.code=l),class:"register-input-code-input",placeholder:o.$t("sign.in.ac.code.placeholder")},null,8,["disabled","onKeydown","value","placeholder"]),v(i,{type:"primary",onClick:I(B,["stop"]),loading:f.value,disabled:n.value||u.value>0,class:z(n.value||u.value>0?"register-input-code-button-disabled":"register-input-code-button")},{default:D(()=>[x(y(f.value?"":u.value>0?`${o.$t("sign.in.ac.code.resetButton")}(${u.value}S)`:o.$t("sign.in.ac.code.button")),1)]),_:1},8,["onClick","loading","disabled","class"])]),v(d,{maxlength:42,disabled:n.value,value:t.value.password,"onUpdate:value":e[2]||(e[2]=l=>t.value.password=l),class:"register-input-account",placeholder:"密码"},null,8,["disabled","value"]),v(d,{maxlength:42,disabled:n.value,value:t.value.confirmPassword,"onUpdate:value":e[3]||(e[3]=l=>t.value.confirmPassword=l),class:"register-input-account",placeholder:"确认密码"},null,8,["disabled","value"]),_("div",ae,y(a.value===""?"":"* "+a.value),1),v(i,{block:"",type:"primary",loading:n.value,onClick:I(V,["stop"]),class:"register-button"},{default:D(()=>[x(y(n.value?"":"注册"),1)]),_:1},8,["loading","onClick"])])])])}}});const le=J(oe,[["__scopeId","data-v-41f33802"]]);export{le as default};
